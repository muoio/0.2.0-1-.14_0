$(function(){let e="";const t=t=>{chrome.storage.local.get({retryWaitMs:3e3},function(r){r.retryWaitMs>0&&c(t,r.retryWaitMs),1==e?chrome.tabs.reload(t):2==e?chrome.tabs.goBack(t):3==e&&(s[t]&&void 0!=s[t]?chrome.tabs.update(t,{url:s[t]}):chrome.tabs.reload(t))})};chrome.webRequest.onHeadersReceived.addListener(function(e){null==String(e.statusCode).match(/^(2|3).*/)&&(404==e.statusCode&&r(500),t(e.tabId))},{urls:["https://japan.supremenewyork.com/","https://japan.supremenewyork.com/#ja"],types:["main_frame"]});const r=e=>{chrome.storage.local.get({entryDelay:1500},function(t){chrome.storage.local.set({entryDelay:Number(t.entryDelay)+Number(e)})})},o=function(){chrome.storage.local.get({recoverType:3},function(t){e=3})};let a={};const c=(e,r)=>{n(e),a[e]=setTimeout(function(){t(e)},r)},n=e=>{a[e]&&(clearTimeout(a[e]),a[e]="")};let s={};chrome.runtime.onMessage.addListener(function(e,t,r){return"updRecoverType"===e.type&&o(),"setBackUrl"===e.type&&(s[t.tab.id]=e.backUrl),"setTimeout"===e.type&&c(t.tab.id,e.retryWaitMs),"clearTimeout"===e.type&&n(t.tab.id),!0}),o()});