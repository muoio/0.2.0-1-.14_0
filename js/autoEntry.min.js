$(function(){let e,t,a;const n=n=>{const i=$(n).offset();return("block"==$(n).css("display")||"inline-block"==$(n).css("display"))&&(!$(n).is(":hidden")&&!(i.top<e.top||e.top+t<i.top||i.left<e.left||e.left+a<i.left))};chrome.runtime.sendMessage({type:"clearTimeout"}),chrome.storage.local.get({autoEntryStatus:!0,entryDelay:1500,startDatetime:"",retryWaitMs:3e3},function(i){if(i.autoEntryStatus){const o=(new Date).getTime(),s=new Date(i.startDatetime).getTime()-o;if(s>0){let e=new Date(i.startDatetime);e=e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2),setTimeout(function(){i.retryWaitMs>0&&chrome.runtime.sendMessage({type:"setTimeout",retryWaitMs:i.retryWaitMs}),window.location.href="https://japan.supremenewyork.com/"},s),alert("タイマー予約が完了しました。OKを押してそのまま放置してください。\n予約日時："+e)}else $("body").append('<div id="login-overlay"><div class="cv-spinner"><span class="spinner"></span></div></div>'),$("#login-overlay").fadeIn(300),$('input[type="submit"]').length>0&&"Continue"==$('input[type="submit"]')[0].value?setTimeout(function(){(()=>{const i=$("form div.justify-content-center");e=i.offset(),t=i.height(),a=i.width(),chrome.storage.local.get({name:"",email:"",tel:"",location:""},function(e){const t=$.map(e.location.split("#"),function(e,t){const a=$.trim(e);return""==a?null:a});if(""!=e.name&&""!=e.email&&""!=e.tel&&""!=e.location){let a=e,i={name:!1,email:!1,tel:!1},l={};$("input").filter(function(t,a){if(n(a)&&$(a.parentNode).is("div.bg")){var o=$(a.parentNode).css("background-image").replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,"").split("base64,")[1],s=atob(o);l[s.length]=a.name}a.placeholder.match(/name|氏名|名前/)&&n(a)&&($(a).val(e.name),i.name=!0),a.placeholder.match(/mail|メール/)&&n(a)&&($(a).val(e.email),i.email=!0),a.placeholder.match(/phone|number|電話|番号/)&&n(a)&&($(a).val(e.tel),i.tel=!0),"agree"==a.name&&n(a)&&(a.checked=!0)}),$.each(t,function(t,o){const s=new RegExp(o,"i");if($('input[name="area"]').each(function(t,o){if(s.test(o.value)&&n(o)){let t=Object.entries(l).map(([e,t])=>({size:e,name:t}));return 0==i.name&&($('input[name="'+t[1].name+'"]').parent().addClass("bg-none"),$('input[name="'+t[1].name+'"]').val(e.name)),0==i.email&&($('input[name="'+t[0].name+'"]').parent().addClass("bg-none"),$('input[name="'+t[0].name+'"]').val(e.email)),0==i.tel&&($('input[name="'+t[2].name+'"]').parent().addClass("bg-none"),$('input[name="'+t[2].name+'"]').val(e.tel)),$('input[name="area"]').val([o.value]),a.area=o.value,chrome.runtime.sendMessage({type:"setPostData",postData:a}),chrome.runtime.sendMessage({type:"setBackUrl",backUrl:location.href}),$('input[type="submit"]')[0].click(),!1}}),void 0!=a.area)return!1}),void 0==a.area&&$("#login-overlay").fadeOut(300)}else $("#login-overlay").fadeOut(300)})})()},i.entryDelay):(l=i.retryWaitMs,$("#login-overlay").fadeOut(300),setTimeout(function(){l>0&&chrome.runtime.sendMessage({type:"setTimeout",retryWaitMs:l}),window.location.reload()},3e3))}var l})});